# Test environment configuration for Dex OAuth2 testing
# This file should be sourced or copied to .env.test

# Database (separate from dev)
DATABASE_URL="postgresql://postgres:postgres@localhost:5433/postgres"
REDIS_URL="redis://localhost:6380"

# Auth configuration
AUTH_SECRET="test-auth-secret-key-that-is-long-enough-for-jwt"
AUTH_URL="http://localhost:3000"
AUTH_CREDENTIALS_LOGIN_ENABLED="true"
AUTH_EMAIL_CODE_LOGIN_ENABLED="false"

# Dex OAuth2 test configuration
AUTH_DEX_ISSUER_URL="http://localhost:5556"
AUTH_DEX_CLIENT_ID="sourcebot-test"
AUTH_DEX_CLIENT_SECRET="test-secret-key-1234567890"

# Disable other auth methods for testing
AUTH_EE_ENABLE_JIT_PROVISIONING="false"

# Logging
SOURCEBOT_LOG_LEVEL="debug"

# Disable telemetry in tests
SOURCEBOT_TELEMETRY_DISABLED="true"
NEXT_TELEMETRY_DISABLED="1"

# Zoekt configuration
ZOEKT_WEBSERVER_URL="http://localhost:6070"

# Test mode
NODE_ENV="test"
SKIP_ENV_VALIDATION="1"